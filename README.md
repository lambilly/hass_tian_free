# 天聚数行免费版 Home Assistant 集成

[![hacs_badge](https://img.shields.io/badge/HACS-Custom-orange.svg)](https://github.com/hacs/integration)

这是一个专为 Home Assistant 设计的免费版天聚数行API集成，提供丰富的中文文化内容。

## 🆓 为什么开发免费版？

由于天聚数行API非会员最多只能申请10个免费API接口，为了让更广大的用户能够使用这些优质的文化内容，我们特别开发了这个免费版集成。

### 免费版特点：
- ✅ **完全免费** - 无需付费API密钥
- ✅ **精选内容** - 保留最受欢迎的10个API接口
- ✅ **独立实体** - 每个API对应一个独立传感器，便于使用
- ✅ **智能缓存** - 1小时缓存机制，避免API调用超限
- ✅ **滚动展示** - 根据时间段智能切换显示内容

## 📋 包含内容

本集成包含以下11个传感器实体：

1. **每日笑话** - 轻松一刻，每日更新
2. **早安心语** - 温馨问候，开启美好一天
3. **晚安心语** - 温馨祝福，伴您入眠
4. **唐诗鉴赏** - 经典唐诗，文化瑰宝
5. **最美宋词** - 婉约豪放，词韵悠长
6. **精选元曲** - 戏曲精华，艺术传承
7. **简说历史** - 历史知识，温故知新
8. **古籍名句** - 经典名句，智慧结晶
9. **经典对联** - 传统对联，文化韵味
10. **英文格言** - 双语格言，启迪智慧
11. **滚动内容** - 智能切换，全天候展示

## 🚀 安装

### 方法一：通过 HACS 安装（推荐）

1. 确保已安装 [HACS](https://hacs.xyz/)
2. 在 HACS 中点击「集成」
3. 点击右下角「+ 浏览并下载仓库」
4. 搜索「天聚数行免费版」并选择
5. 点击「下载」
6. 重启 Home Assistant

### 方法二：手动安装

1. 下载整个 `tian_free` 文件夹
2. 将其放入 `custom_components` 目录
3. 重启 Home Assistant
4. 在集成页面添加「天聚数行免费版」

## ⚙️ 配置

1. 在 Home Assistant 中进入「配置」->「集成」
2. 点击「+ 添加集成」
3. 搜索「天聚数行免费版」
4. 输入您的天聚数行API密钥（32位）
5. 点击「提交」

## 🔧 API 密钥获取

1. 访问 [天聚数行官网](https://www.tianapi.com/)
2. 注册账号并登录
3. 在控制台申请免费API密钥
4. 每个账号可免费申请10个API接口

## 📊 实体属性

每个传感器实体都包含以下属性：
- `title`: 实体标题
- `code`: API返回状态码
- `update_time`: 最后更新时间
- 其他内容相关属性

## 🕒 滚动内容时段安排

滚动内容传感器会根据时间段自动切换显示内容：

- **05:30-08:29** 🌅 早安问候
- **08:30-10:59** ☘️ 英文格言  
- **11:00-12:59** 🌻 每日笑话
- **13:00-14:29** 🌻 古籍名句
- **14:30-15:59** 🔖 经典对联
- **16:00-17:59** 🏷️ 简说历史
- **18:00-19:29** 🔖 唐诗鉴赏
- **19:30-20:59** 🌼 最美宋词
- **21:00-22:29** 🔖 精选元曲
- **22:30-05:29** 🌃 晚安问候

## 🔄 更新频率

- 所有传感器每天自动更新一次
- 缓存机制：1小时内重复调用使用缓存数据
- 支持手动立即更新

## 🐛 故障排除

### 常见问题

**Q: API密钥错误**
A: 请确认API密钥为32位字符串，且在天聚数行官网有效

**Q: 实体显示"API请求失败"**
A: 检查网络连接，确认API密钥有效且未超过调用限制

**Q: 滚动内容显示"等待数据加载"**
A: 首次安装需要等待所有传感器完成首次更新，或手动重新加载

**Q: 如何重新加载集成？**
A: 在开发者工具中点击"重新加载天聚数行免费版"

## 📄 许可证

本项目采用 MIT 许可证

## 🙏 致谢

感谢天聚数行提供的免费API服务
感谢 Home Assistant 社区
感谢所有贡献者和用户

## 🐛 问题反馈

如果您遇到任何问题或有改进建议，请在GitHub仓库中提交Issue。

---

**注意**: 本集成仅用于个人学习和非商业用途，请遵守天聚数行的API使用条款。
